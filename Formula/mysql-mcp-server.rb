# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class MysqlMcpServer < Formula
  desc "MySQL MCP Server - Model Context Protocol server for MySQL databases"
  homepage "https://github.com/askdba/mysql-mcp-server"
  version "1.6.0"
  license "Apache-2.0"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/askdba/mysql-mcp-server/releases/download/v1.6.0/mysql-mcp-server_1.6.0_darwin_amd64.tar.gz"
      sha256 "3c7aa538748242a9e7c6eae49746e3925ca02f09559cf7ea47973985c137fa00"

      def install
        bin.install "mysql-mcp-server"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/askdba/mysql-mcp-server/releases/download/v1.6.0/mysql-mcp-server_1.6.0_darwin_arm64.tar.gz"
      sha256 "ad6173b526a31f8684f9a9339fd5e5a5d9b0aeddceeebd8da5bb73a78361f54e"

      def install
        bin.install "mysql-mcp-server"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel? && Hardware::CPU.is_64_bit?
      url "https://github.com/askdba/mysql-mcp-server/releases/download/v1.6.0/mysql-mcp-server_1.6.0_linux_amd64.tar.gz"
      sha256 "216375e822c5ee0ee1af8f128df8e5cbf9d98b32b0422466583eda4cf8632865"
      def install
        bin.install "mysql-mcp-server"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/askdba/mysql-mcp-server/releases/download/v1.6.0/mysql-mcp-server_1.6.0_linux_arm64.tar.gz"
      sha256 "bae1648887c28f6ccf2143c8e3920b5b2a7c513ebe8e503899643b37a6c6ab74"
      def install
        bin.install "mysql-mcp-server"
      end
    end
  end

  def caveats
    <<~EOS
      To use mysql-mcp-server with Claude Desktop, add to your config:

        {
          "mcpServers": {
            "mysql": {
              "command": "#{HOMEBREW_PREFIX}/bin/mysql-mcp-server",
              "env": {
                "MYSQL_DSN": "user:password@tcp(localhost:3306)/database"
              }
            }
          }
        }

      Config location:
        macOS: ~/Library/Application Support/Claude/claude_desktop_config.json
        Linux: ~/.config/Claude/claude_desktop_config.json
    EOS
  end

  test do
    assert_match "mysql-mcp-server", shell_output("#{bin}/mysql-mcp-server --version")
  end
end
