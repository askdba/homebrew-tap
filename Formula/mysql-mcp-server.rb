# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class MysqlMcpServer < Formula
  desc "MySQL MCP Server - Model Context Protocol server for MySQL databases"
  homepage "https://github.com/askdba/mysql-mcp-server"
  version "1.4.0"
  license "Apache-2.0"

  on_macos do
    if Hardware::CPU.intel?
      url "https://github.com/askdba/mysql-mcp-server/releases/download/v1.4.0/mysql-mcp-server_1.4.0_darwin_amd64.tar.gz"
      sha256 "4ddba0166143f299688905564b69ed95ab8b8852a1b5696f3d756f83cfaa1956"

      def install
        bin.install "mysql-mcp-server"
      end
    end
    if Hardware::CPU.arm?
      url "https://github.com/askdba/mysql-mcp-server/releases/download/v1.4.0/mysql-mcp-server_1.4.0_darwin_arm64.tar.gz"
      sha256 "c3b3185ce6bf0614df6b0d7406d6afa446241907a7e4ee5700e01c1fce5f81a4"

      def install
        bin.install "mysql-mcp-server"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel? && Hardware::CPU.is_64_bit?
      url "https://github.com/askdba/mysql-mcp-server/releases/download/v1.4.0/mysql-mcp-server_1.4.0_linux_amd64.tar.gz"
      sha256 "4f82a5a79695eef4fa6a1e0dc149051efa74f9b8e68ef4352262b4ea146ff52a"
      def install
        bin.install "mysql-mcp-server"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/askdba/mysql-mcp-server/releases/download/v1.4.0/mysql-mcp-server_1.4.0_linux_arm64.tar.gz"
      sha256 "0c9758fc6388c710da8a0a853c0e0ebfca3a0d1349fa4d0b71ac766235ff9138"
      def install
        bin.install "mysql-mcp-server"
      end
    end
  end

  def caveats
    <<~EOS
      To use mysql-mcp-server with Claude Desktop, add to your config:

        {
          "mcpServers": {
            "mysql": {
              "command": "#{HOMEBREW_PREFIX}/bin/mysql-mcp-server",
              "env": {
                "MYSQL_DSN": "user:password@tcp(localhost:3306)/database"
              }
            }
          }
        }

      Config location:
        macOS: ~/Library/Application Support/Claude/claude_desktop_config.json
        Linux: ~/.config/Claude/claude_desktop_config.json
    EOS
  end

  test do
    assert_match "mysql-mcp-server", shell_output("#{bin}/mysql-mcp-server --version")
  end
end
